# Wheel of Misfortune

This is spin-wheel I made for a streamer to let his viewers use Channel Points[[1]](#1) to spin various wheels that would give the streamer a random challenge or penalty. Giving the viewers a way to be more engaged in the stream.  

## The widget

The wheel itself is a custom [StreamElements](https://streamelements.com) overlay widget that uses the [Winwheel](http://dougtesting.net/home) library for the actual spinning of the wheel.
  
**Widget features:**
- Spin a wheel with Channel Point Rewards.
- Spin a wheel with subsriptions.
- Support for multiple wheels in one overlay, properly queueing up spins if multple spins are redeemed at once.
- Text-to-Speech announcing which segment the wheel lands on.
- Automatically time out the viewer who spun the wheel if it lands on a 'ban' segment.  
- Dedicated chatbot that can announce certain spin results in the chat, and provides moderators (and the streamer) certain commands to redo the last spin, manually do a spin, etc.  
- Store spin results in a list to be reviewed later.  
- Hide the wheel a couple seconds after it stop spinning.  
  
**Note:** The widget was never made to be set up and used by anyone other than myself, so please don't judge it too harshly on user-friendliness etc. as that was never a goal or requirement.  
  
Example of a wheel being spun on stream:  
  
![stream](https://user-images.githubusercontent.com/88692413/231456970-903db9de-109b-45a6-969a-e441e2980eb9.png)  

## The web app

I also made an offline web app that I used initially to generate the 'hitboxes' for the wheel images, and later also for making the actual wheel images themselves.  
The Winwheel library used for this web app has been modified quite a bit from the original, to make it easier to do what I wanted.  
I did a number of things to make it more user friendly in case anyone else wanted to use it in the future (as well as for myself), but didn't do too much since I could make it 'properly' user friendly in the future if that ever would happen. To not waste any time on it.  
  
The web app has two main uses/modes. (I suggest you click on the screenshots to view them fullscreen) 
- Hitbox mode: If an artist made a fully complete wheel image, you need to tell the widget where the segments of the wheel are on the image.  
  
![hitbox](https://user-images.githubusercontent.com/88692413/231456948-b8311de6-a00b-4a05-ad40-7e40e01969b2.png)  
  
Note the red lines showing where the 'hitboxes' of each segment are. The actual wheel looks like this:  
  
<img width="400" alt="lplus" src="https://user-images.githubusercontent.com/88692413/231456958-ad24fa7a-8882-4a3d-8681-feaeca95a91e.png">  

- Create mode: To make the wheel image yourself. You upload an image for the background of the wheel, and the segement lines and text gets generated by the web app. You can specify the text size, font, position, orientation, style, etc, as well as potentially adding a separate image to each segment if text alone doesn't describe the 'prize' well enough.  
  
![create](https://user-images.githubusercontent.com/88692413/231456918-61a3454c-5633-4b5b-bfcc-60390f48bb77.png)  
  
In each mode, clicking on "Generate segment text" gives you JSON text containing the size of each segment and the words you want the Text-to-Speech to say if the wheel lands on that segment. This JSON is given it the widget along side the wheel image when adding a wheel to the widget.

---

<a id="1">[1]</a>: Channel Points are a fake currency that viewers can earn by watching the stream and can spend on Channel Point Rewards. "Spin the wheel" would be one of these rewards.  
